(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const w=async(e=0)=>{try{const t=await fetch("https://api.tvmaze.com/shows");if(!t.ok)throw new Error(`Error detected: ${t.status} ${t.statusText}`);return await t.json()}catch(t){console.warn(t)}},f=async e=>{try{const t=await fetch(`https://api.tvmaze.com/shows/${e}`);if(!t.ok)throw new Error(`Error detected: ${t.status} ${t.statusText}`);return await t.json()}catch(t){console.warn(t)}},q=async e=>{try{const t=await fetch(`https://api.tvmaze.com/search/shows?q=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Error detected: ${t.status} ${t.statusText}`);const r=await t.json();return Array.isArray(r)?r.map(o=>o.show):[]}catch(t){throw console.warn(t),t}},h="tv-show-favorites",i=()=>{const e=localStorage.getItem(h);return e?JSON.parse(e):[]},E=e=>{localStorage.setItem(h,JSON.stringify(e))},L=e=>{if(e==null)return console.warn("Attempted to favorite an invalid ID"),i();const t=i(),r=t.indexOf(e);return r===-1?t.push(e):t.splice(r,1),E(t),t},u=(e,t)=>{const r=document.querySelector(t);r.replaceChildren(),e.forEach(o=>{const n=document.createElement("li");n.dataset.id=o.id;const s=document.createElement("h3"),c=document.createElement("img"),a=document.createElement("p");s.textContent=`${o.name}`,c.src=o.image?.medium||"placeholder-url-here",c.alt=`Show poster ${o.name}`,a.textContent=`Rating: ${o.rating.average||"N/A"}`,n.append(s,c,a),r.append(n)})},x=e=>{document.querySelector("#show-details").classList.remove("hidden");const r=document.querySelector("#show-name"),o=document.querySelector("#show-image"),n=document.querySelector("#show-genre"),s=document.querySelector("#show-airingdates"),c=document.querySelector("#show-rating"),a=document.querySelector("#show-summary"),d=document.querySelector("#favorites-button");r.textContent=e.name,o.src=e.image?.medium||"https://via.placeholder.com",o.alt=e.name,n.textContent=e.genres.join(", "),s.textContent=`Premiered: ${e.premiered}, Ended: ${e.ended}`,c.textContent=`Rating: ${e.rating.average||"N/A"}`;const p=e.summary?e.summary.replace(/<[^>]*>/g,""):"No summary available";a.textContent=p;const v=i().includes(e.id.toString());d.textContent=v?"ðŸ’œ In favorites":"â¤ï¸ Add to favorites",d.onclick=()=>{const S=L(e.id.toString()).includes(e.id.toString());d.textContent=S?"ðŸ’œ In favorites":"â¤ï¸ Add to favorites"}},$=async()=>{const t=i().map(o=>f(o)),r=await Promise.all(t);console.log(r),u(r,"#render-favorites")},g=async()=>{const e=await w();u(e,"#show-list"),console.log("renderShowDetails called")};g();const m=document.querySelector("#search-form");m.addEventListener("submit",async e=>{e.preventDefault();const r=document.querySelector("#search-input").value;try{const o=await q(r);u(o,"#show-list")}catch(o){console.warn("Search failed:",o)}m.reset()});const C=document.querySelector("#close-button");C.addEventListener("click",()=>{document.querySelector("#show-details").classList.add("hidden")});g();const l=document.querySelector("#show-details");l.addEventListener("click",e=>{e.target===l&&l.classList.add("hidden")});const F=document.querySelector("#favorites-toggle");F.addEventListener("click",async()=>{const e=document.querySelector("#favorites-section");e.classList.contains("hidden")&&await $(),e.classList.toggle("hidden"),document.querySelector("#collection-section").classList.toggle("hidden")});const y=async e=>{const t=e.target.closest("li");if(!t||!t.dataset.id)return;const r=t.dataset.id;try{const o=await f(r);console.log(o),x(o)}catch(o){console.warn(o)}},N=document.querySelector("#show-list"),A=document.querySelector("#render-favorites");N.addEventListener("click",y);A.addEventListener("click",y);
