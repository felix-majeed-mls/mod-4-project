(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const u=async(t=0)=>{try{const e=await fetch("https://api.tvmaze.com/shows");if(!e.ok)throw new Error(`Error detected: ${e.status} ${e.statusText}`);return await e.json()}catch(e){console.warn(e)}},m=async t=>{try{const e=await fetch(`https://api.tvmaze.com/shows/${t}`);if(!e.ok)throw new Error(`Error detected: ${e.status} ${e.statusText}`);return await e.json()}catch(e){console.warn(e)}},h=async t=>{try{const e=await fetch(`https://api.tvmaze.com/search/shows?q=${encodeURIComponent(t)}`);if(!e.ok)throw new Error(`Error detected: ${e.status} ${e.statusText}`);const n=await e.json();return Array.isArray(n)?n.map(r=>r.show):[]}catch(e){throw console.warn(e),e}},i=t=>{const e=document.querySelector("#show-list");e.replaceChildren(),t.forEach(n=>{const r=document.createElement("li");r.dataset.id=n.id;const o=document.createElement("h3"),s=document.createElement("img"),c=document.createElement("p");o.textContent=`${n.name}`,s.src=n.image?.medium||"placeholder-url-here",s.alt=`Show poster ${n.name}`,c.textContent=`Rating: ${n.rating.average||"N/A"}`,r.append(o,s,c),e.append(r)})},p=t=>{document.querySelector("#show-details").classList.remove("hidden");const n=document.querySelector("#show-name"),r=document.querySelector("#show-image"),o=document.querySelector("#show-genre"),s=document.querySelector("#show-airingdates"),c=document.querySelector("#show-rating"),d=document.querySelector("#show-summary");n.textContent=t.name,r.src=t.image?.medium||"placeholder-url-here",r.alt=t.name,o.textContent=t.genres.join(", "),s.textContent=`Premiered: ${t.premiered}, Ended: ${t.ended}`,c.textContent=`Rating: ${t.rating.average||"N/A"}`,d.textContent=t.summary},l=async()=>{const t=await u();i(t),console.log("renderShowDetails called")};l();const w=document.querySelector("#show-list");w.addEventListener("click",async t=>{const e=t.target.closest("li");if(!e)return;const n=e.dataset.id;try{const r=await m(n);console.log(r),p(r)}catch(r){console.warn(r)}});const a=document.querySelector("#search-form");a.addEventListener("submit",async t=>{t.preventDefault();const n=document.querySelector("#search-input").value;try{const r=await h(n);i(r)}catch(r){console.warn("Search failed:",r)}a.reset()});l();
